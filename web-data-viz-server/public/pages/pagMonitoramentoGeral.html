<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/pagMonitoramentoGeral.css">
    <link rel="shortcut icon" type="imagex/png" href="img/icone.png">

    <!-- toast - alerta -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.all.min.js"></script>

    <title>Spectra | Dashboard</title>
</head>

<body>
    <!-- ------------------------ HEADER ------------------------ -->
    <div id="header-nav" class="header">

        <div class="containerHeader">

            <div class="logoNav">
                <a href="/monitoramentoGeral">
                    <img src="img/LOGO_SPECTRA2 font-white.svg" alt="" id="imgLogo">
                </a>

            </div>
            <nav id="navTopo">
                <div id="nomeEmpresa" class="nomeEmpresa">
                    <p id="nomeEmp"></p>
                </div>
            </nav>
        </div>
    </div>
    <!-- ------------------------ HEADER ------------------------ -->



    <!-- ------------------------ BODY ------------------------ -->
    <div class="conteudoTotal">
        <div id="sideBar" class="sideBar">
            <div class="sideContainer">
                <div class="sideBox">
                    <img src="img/icon-usuario.svg" alt="" class="iconUsuario">

                    <div class="dadosUsuario">
                        <div id="nomeUsuario" class="nomeUsuario">
                            <p id="nomeUser"></p>
                        </div>
                        <div id="tipoAcesso" class="tipoAcesso">
                            <p id="tipoUser"></p>
                        </div>
                    </div>
                </div>

                <div class="configuracoes">
                    <a href="/configuracaoTaxas" style="text-decoration: none;">

                        <div class="configurarMaquina" id="div_configurarMaquina">
                            <img src="img/icon-config.svg" class="iconConfig">
                            <div id="configurarMaquina">Configurar Máquinas</div>
                        </div>

                    </a>

                    <a href="/cadastroFuncionario" style="text-decoration: none;">
                        <div class="cadastrarUsuario" id="div_cadastrarUsuario">
                            <img src="img/icon-usuario2.svg" class="iconUsuario2">
                            <div id="cadastrarUsuario">Cadastrar Usuário</div>
                        </div>
                    </a>

                    <span style="text-decoration: none;" onclick="configurarSlack()" id="span_configurarSlack">
                        <div class="home">
                            <img src="img/slack.svg" class="iconUsuario3">
                            <div id="home">Slack</div>
                        </div>
                    </span>

                    <a href="/monitoramentoGeral" style="text-decoration: none;">
                        <div class="home">
                            <img src="img/casa.svg" class="iconUsuario3">
                            <div id="home">Home</div>
                        </div>
                    </a>
                    <a href="http://localhost:3000/download" download style="text-decoration: none;">
                        <div class="home">
                            <img src="img/script.svg" class="iconUsuario3">
                            <div id="home">Script</div>
                        </div>
                    </a>

                </div>

            </div>
            <div id="sair" class="sair">
                <a onclick="limparSessao()">
                    <img src="img/sair.svg" alt="" class="iconSair">
                </a>
                <div>Sair</div>
            </div>

        </div>

        <!-- ------------------------ BODY ------------------------ -->


        <!-- ------------------------ conteudo -------------------------  -->

        <div class="conteudo">

            <div class="visaoGeral">
                <div class="titulo">
                    <span>
                        Visão geral das máquinas
                    </span>
                </div>

                <div class="partesGeral">
                    <img src="img/icon-disponibilidae.svg" alt="" id="iconsAlertaDisponibilidade">
                    <div class="disponibilidade">
                        <div class="conteudoD">
                            <div class="porcentagemD">
                                <span id="valorDisp">0%</span>
                            </div>

                            <div class="escritaD">
                                <div class="tituloD">Disponibilidade</div>

                                <div class="complementoD">nas 2 últimas semanas</div>
                            </div>

                        </div>

                    </div>


                    <img src="img/icon-avisos.svg" alt="" id="iconsAlertaAvisos">

                    <div class="avisos">
                        <div class="conteudoA">

                            <div class="porcentagemA">
                                <span id="totalAvisosCriticos">0</span>
                            </div>

                            <div class="escritaA">
                                <div class="tituloA">Avisos Críticos</div>
                                <div class="complementoA"><b style="color: #FF1818;" id="diferencaCriticos">0</b> nas 2
                                    últimas semanas</div>
                            </div>

                        </div>
                    </div>


                    <img src="img/icon-alertas.svg" alt="" id="iconsAlertas">

                    <div class="qntdAlertas">
                        <div class="conteudoQ">

                            <div class="porcentagemQ">
                                <span id="totalAvisosAlertas">0</span>
                            </div>

                            <div class="escritaQ">
                                <div class="tituloQ">Avisos Alertas</div>

                                <div class="complementoQ">
                                    <b style="color: #1DB83F;" id="diferencaAlertas">0</b> nas 2 últimas semanas
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>


            <div class="tlt1">Status Máquinas</div>
            <div class="maquinasCad">
                <div class="tlt2">
                    <span>Ordenação por cadastro</span>
                    <span id="totalMaquinas"></span>
                </div>

                <div class="maquinas" id="maquinas">


                </div>

                <div class="legendaMaquinas">
                    <div>
                        <div class="quadradosl" id="normal"></div>
                        <span id="tltIdeal">-IDEAL (0 máquinas)</span>
                    </div>

                    <div>
                        <div class="quadradosl" id="alerta"></div>
                        <span id="tltAlerta">-ALERTA (0 máquinas)</span>
                    </div>

                    <div>
                        <div class="quadradosl" id="critico"></div>
                        <span id="tltCritico">-CRÍTICO (0 máquinas)</span>
                    </div>
                    <div>
                        <div class="quadradosl" id="nula"></div>
                        <span id="tltNula">-NULA (0 máquinas)</span>
                    </div>
                </div>
            </div>

            <div class="notificacao">
                <div class="tltN">Notificações</div>

                <div class="btsFiltrar">
                    <div class="escrita">Filtrar</div>
                    <div class="botoes">
                        <button class="btA" onclick="buscarNotificacao(sessionStorage.ID_EMPRESA, 2)">Alerta</button>
                        <button class="btC" onclick="buscarNotificacao(sessionStorage.ID_EMPRESA, 1)">Crítico</button>
                    </div>
                </div>

                <div id="divCentralNotificacao">

                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script src="js/pagMonitoramentoGeral.js"></script>
<script src="js/loginDash.js"></script>
<script src="js/funcSlack.js"></script>

<script>
    if (sessionStorage.TIPO_FUNCAO == 'Usuario comum') {

        document.getElementById("div_configurarMaquina").style.display = "none";
        document.getElementById("div_cadastrarUsuario").style.display = "none";
        document.getElementById("span_configurarSlack").style.display = "none";
    }

    valoresUsuario()

    const idEmpresa = sessionStorage.ID_EMPRESA;
    buscarMaquina(idEmpresa)
    buscarNotificacao(idEmpresa, 1)
    atualizarKPI(idEmpresa)

</script>